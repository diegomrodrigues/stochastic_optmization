## Otimização de Estoque via Abordagem Worst-Case

### Introdução

Como explorado anteriormente no contexto do problema do *News Vendor* [^2, ^4], a gestão de estoques frequentemente envolve tomar decisões sobre quantidades a pedir (`x`) antes que a demanda futura (`d`) seja conhecida. A incerteza inerente à demanda representa um desafio significativo. Uma abordagem comum, detalhada previamente, é minimizar o valor esperado do custo total, formulado como `Min E[F(x, D)]` [^6], onde `D` é a demanda vista como uma variável aleatória com distribuição de probabilidade conhecida. No entanto, em muitas situações práticas, a distribuição de probabilidade exata da demanda pode ser desconhecida ou difícil de estimar com precisão. Nesses casos, ou quando o decisor possui uma forte aversão ao risco, uma alternativa robusta é a **abordagem worst-case** (ou minimax). Esta abordagem foca em proteger contra o pior cenário possível dentro de um intervalo plausível para a demanda. Especificamente, se a demanda `d` é desconhecida mas sabe-se que pertence a um intervalo fechado `[l, u]`, onde `l` e `u` são limites inferior e superior conhecidos e não negativos [^1], a abordagem worst-case busca minimizar o custo máximo possível. O problema de otimização correspondente é formulado como:\n\n> A formulação worst-case é dada por:\n> $$ \\underset{x \\ge 0}{\\text{Min}} \\max_{d \\in [l, u]} F(x, d) \\quad (1.9) $$ [^14]\n\nEste capítulo detalhará essa abordagem, analisando a estrutura do problema e derivando a solução ótima para a quantidade de pedido `x`.\n\n### Conceitos Fundamentais\n\nA função de custo total `F(x, d)` no problema de estoque básico, conforme definido anteriormente, captura os custos de pedido, falta (*backorder*) e manutenção (*holding*). Ela é dada por `F(x, d) = cx + b[d − x]_+ + h[x - d]_+` [^2], onde `c` é o custo unitário de pedido, `b` é o custo unitário de falta (penalidade por *backorder*), e `h` é o custo unitário de manutenção. Assume-se que `b > c` [^3, ^18], indicando que a penalidade por falta é maior que o custo de pedido inicial. A função `[a]_+` denota `max{a, 0}`. Como visto em (1.3), essa função custo pode ser reescrita como `F(x, d) = max {(c – b)x + bd, (c + h)x – hd}` [^4], que é uma função linear por partes em `x` para um `d` fixo.\n\nO cerne da abordagem worst-case reside na operação `max_{d∈[l,u]} F(x, d)`. Para um `x` fixo, precisamos determinar qual valor de demanda `d` dentro do intervalo `[l, u]` maximiza o custo `F(x, d)`. A análise da estrutura da função `F(x, d)` revela que, para um `x` fixo, o custo é maximizado quando a demanda `d` atinge um dos extremos do intervalo. Portanto, a maximização interna pode ser simplificada:\n\n$$ \\max_{d \\in [l, u]} F(x, d) = \\max \\{ F(x, l), F(x, u) \\} $$ [^15]\n\nIsso significa que o pior cenário de custo ocorrerá quando a demanda for a mínima possível (`l`) ou a máxima possível (`u`). Intuitivamente, se a demanda for `l`, o risco é de custo excessivo de manutenção (`h[x-l]_+`), enquanto se a demanda for `u`, o risco é de custo excessivo de falta (`b[u-x]_+`).\n\nCom essa simplificação, o problema worst-case (1.9) [^14] pode ser reescrito, focando na faixa de decisão relevante `x ∈ [l, u]` (pois soluções fora dessa faixa raramente são ótimas sob a ótica worst-case quando `b > c > 0` e `h ≥ 0`). A função objetivo torna-se:\n\n$$ \\underset{x \\in [l, u]}{\\text{Min}} \\psi(x) := \\max \\{ cx + h[x - l]_+, cx + b[u - x]_+ \\} $$ [^16]\n\nA função `ψ(x)` representa o custo máximo possível para uma dada quantidade pedida `x` e é uma **função convexa e linear por partes** (*piecewise linear convex function*) [^17]. A convexidade garante que um mínimo global pode ser encontrado.\n\nPara determinar a solução ótima `x^*`, buscamos o valor de `x` que minimiza `ψ(x)`. Dada a natureza convexa e a forma `max{f1(x), f2(x)}`, o mínimo frequentemente ocorre no ponto onde os argumentos do máximo são iguais, desde que esse ponto esteja no domínio considerado. Assumindo que a solução ótima `x^*` está no intervalo `[l, u]`, igualamos os termos variáveis correspondentes aos custos de manutenção (no caso `d=l`) e de falta (no caso `d=u`):\n\n$$ h[x^* - l]_+ = b[u - x^*]_+ $$\n\nConsiderando `x^* ∈ [l, u]`, temos `[x^* - l]_+ = x^* - l` e `[u - x^*]_+ = u - x^*`. A equação torna-se:\n\n$$ h(x^* - l) = b(u - x^*) $$ [^19]\n\nResolvendo para `x^*`, obtemos:\n$$ hx^* - hl = bu - bx^* $$\n$$ hx^* + bx^* = hl + bu $$\n$$ (h + b)x^* = hl + bu $$\n\n> A solução ótima para o problema worst-case (1.9) é dada por:\n> $$ x^* = \\frac{hl + bu}{h + b} $$ [^20]\n\nEsta solução `x^*` representa a quantidade de estoque que equaliza o custo de manutenção no cenário de demanda mínima (`d=l`) com o custo de falta no cenário de demanda máxima (`d=u`).\n\nÉ instrutivo comparar esta solução `x^*` com a solução `x̄` obtida pela minimização do valor esperado, `x̄ = H⁻¹((b-c)/(b+h))` [^10]. A solução worst-case `x^*` pode ser bastante diferente de `x̄` e tende a ser mais **conservadora** [^21]. Por exemplo, se o custo de manutenção `h` for zero, a fórmula para `x^*` resulta em `x^* = (0*l + bu) / (0 + b) = u` [^21]. Isso significa que, na ausência de custo de manutenção, a estratégia worst-case é pedir a quantidade máxima de demanda possível (`u`) para evitar qualquer custo de falta, refletindo uma postura extremamente avessa ao risco de ruptura de estoque. Por outro lado, a solução baseada no valor esperado, `x̄`, depende intrinsecamente da forma da distribuição de probabilidade da demanda `D` (via sua função de distribuição acumulada `H(·)`), informação esta que pode não estar disponível ou ser incerta [^22]. A abordagem worst-case, em contraste, requer apenas o conhecimento dos limites `l` e `u` da demanda [^1], tornando-a aplicável em situações com informação mais limitada.\n\n### Conclusão\n\nA abordagem worst-case oferece um paradigma robusto para a otimização de estoque sob incerteza de demanda, particularmente útil quando a distribuição de probabilidade da demanda é desconhecida ou quando se deseja uma garantia contra o pior resultado possível. Ao formular o problema como `Min_x max_{d∈[l, u]} F(x, d)` [^14], busca-se a quantidade de estoque `x` que minimiza o custo máximo, considerando que a demanda `d` pode assumir qualquer valor no intervalo `[l, u]`. A análise revela que o custo máximo ocorre em um dos extremos do intervalo de demanda [^15]. A solução ótima, `x^* = (hl + bu) / (h + b)` [^20], equilibra os custos potenciais de manutenção excessiva (se a demanda for `l`) e de falta de estoque (se a demanda for `u`). Embora potencialmente conservadora [^21] em comparação com abordagens baseadas em valor esperado [^10], a solução worst-case fornece uma decisão defensável e robusta, dependendo apenas dos limites da demanda e dos parâmetros de custo.\n\n### Referências\n\n[^1]: One can also consider the worst-case approach. That is, suppose that there are known lower and upper bounds for the demand, i.e., it is unknown that d ∈ [l, u], where l ≤ u are given (nonnegative) numbers. (p. 4)\n[^2]: F(x, d) = cx + b[d − x]+ + h[x - d]+. (p. 2)\n[^3]: We assume that b > c, i.e., the backorder penalty cost is larger than the ordering cost. (p. 2)\n[^4]: F(x, d) = max {(c – b)x + bd, (c + h)x – hd}. (p. 2)\n[^5]: if the demand d is known, then (as expected) the best decision is to order exactly the demand quantity d. (p. 2)\n[^6]: Consequently, we can write the corresponding optimization problem Min_{x≥0} { f (x) := E[ F(x, D)]}. (1.4) (p. 2)\n[^7]: The above problem gives a very simple example of a two-stage problem or a problem with a recourse action. (p. 2)\n[^8]: E[F(x, D)] = b E[D] + (c – b)x + (b + h) ∫₀ˣ H(z)dz. (1.5) (p. 2)\n[^9]: Indeed, the expectation function f (x) = E[F(x, D)] is a convex function. (p. 3)\n[^10]: an optimal solution of problem (1.4) is equal to the quantile x̄ = H⁻¹(κ) with κ = (b − c)/(b + h). (1.6) (p. 3)\n[^11]: Suppose for the moment that the random variable D has a finitely supported distribution...In that case, its cdf H(·) is a step function...viewed as the empirical cdf... (p. 3)\n[^12]: It is instructive to compare the quantile solution x̄ with a solution corresponding to one specific demand value d := d̄, where d̄ is, say, the mean (expected value) of D...The mean d̄ can be very different from the κ-quantile x̄ = H⁻¹(κ). (p. 3)\n[^13]: Similarly, the expected value problem (1.4), with scenarios d₁,..., dk, can be written as the linear programming problem: Min Σ pk vk s.t. ... (1.8) (p. 4)\n[^14]: Then the worst-case formulation is Min_{x≥0} max_{d∈[l,u]} F(x, d). (1.9) (p. 4)\n[^15]: By (1.3) we have that max_{d∈[l,u]} F(x, d) = max{F(x, l), F(x, u)}. (p. 4)\n[^16]: Clearly we should look at the optimal solution in the interval [l, u], and hence problem (1.9) can be written as Min_{x∈[l,u]} ψ(x) := max {cx + h[x - l]+, cx + b[u - x]+}. (p. 4)\n[^17]: The function ψ(x) is a piecewise linear convex function. (p. 4)\n[^18]: Assuming that b > c... (p. 4)\n[^19]: ...we have that the optimal solution of problem (1.9) is attained at the point where h(x - l) = b(u - x). (p. 4-5)\n[^20]: That is, the optimal solution of problem (1.9) is x* = (hl + bu) / (h + b). (p. 5)\n[^21]: The worst-case solution x* can be quite different from the solution x̄...and could be overall conservative. For instance, if h = 0...then x* = u. (p. 5)\n[^22]: On the other hand, the optimal on average solution x̄ depends on the distribution of the demand D which could be unavailable. (p. 5)\n[^23]: Suppose now that in addition to the lower and upper bounds of the demand, we know its mean (expected value) d̄ = E[D]...Then we can consider the following worst-case formulation: Min_{x≥0} sup_{H∈M} E_H [F(x, D)], (1.10) where M denotes the set of probability measures supported on the interval [l, u] and having mean d̄... (p. 5)\n[^24]: 1.2.2 Chance Constraints (p. 5)\n\n<!-- END -->
